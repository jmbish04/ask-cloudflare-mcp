name = "ask-cloudflare-mcp"
main = "src/index.ts"
compatibility_date = "2024-11-30"
compatibility_flags = ["nodejs_compat"]

# Observability Logs
[observability]
enabled = true
head_sampling_rate = 1

# AI Binding for Worker AI
[ai]
binding = "AI"

# KV namespace for question caching
[[kv_namespaces]]
binding = "QUESTIONS_KV"
id = "10054da1a5e04387ad6734c0432fa289"
preview_id = "10054da1a5e04387ad6734c0432fa289"

# D1 database for session management and logging
[[d1_databases]]
binding = "DB"
database_name = "ask-cloudflare-mcp"
database_id = "66879f94-f773-4da3-819c-c56b2210cbb5"
migrations_dir = "migrations"
migrations_table = "__drizzle_migrations__"

# Secrets (set these using: wrangler secret put GITHUB_TOKEN)
# GITHUB_TOKEN - GitHub Personal Access Token (readonly)

# Environment variables
[vars]
MCP_API_URL = "https://docs.mcp.cloudflare.com/mcp"
WORKER_URL = "https://ask-cloudflare-mcp.hacolby.workers.dev"

# Static assets
[assets]
directory = "public"
binding = "ASSETS"
not_found_handling = "single-page-application"

# Cron Triggers
[triggers]
crons = [
  "0 0 * * MON-SAT", # Nightly (Mon-Sat)
  "0 0 * * SUN"      # Weekly on Sunday
]

